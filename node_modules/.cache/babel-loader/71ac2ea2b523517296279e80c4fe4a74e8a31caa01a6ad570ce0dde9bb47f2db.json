{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Menu=()=>{const navigate=useNavigate();const[isAdmin,setIsAdmin]=useState(false);const[userName,setUserName]=useState('');const[debugInfo,setDebugInfo]=useState({});useEffect(()=>{const fetchUserInfo=()=>{const userRole=localStorage.getItem('userRole');const storedUserName=localStorage.getItem('userName');const token=localStorage.getItem('token');console.log('Retrieved from localStorage:',{userRole,storedUserName,token});setIsAdmin(userRole==='admin');setUserName(storedUserName||'');setDebugInfo({userRole,storedUserName,tokenExists:!!token});};fetchUserInfo();// Configurar un intervalo para verificar periódicamente\nconst intervalId=setInterval(fetchUserInfo,1000);// Limpiar el intervalo cuando el componente se desmonte\nreturn()=>clearInterval(intervalId);},[]);const handleUpdateSubjects=()=>{navigate('/seleccion-materias');};const handleChooseSubjects=()=>{navigate('/SeleccionMateriashorarios');};const handleDownloadData=()=>{navigate('/Descarga');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hola, \",userName||'Usuario',\"!\"]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Men\\xFA Principal\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateSubjects,children:\"Generar Historial\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleChooseSubjects,children:\"Selecci\\xF3n de Horarios\"})}),isAdmin&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDownloadData,children:\"Descargar Informaci\\xF3n\"})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',border:'1px solid #ccc',padding:'10px'},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Tipo de usuario: \",debugInfo.userRole||'Rol indefinido']})})]});};export default Menu;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxs","_jsxs","jsx","_jsx","Menu","navigate","isAdmin","setIsAdmin","userName","setUserName","debugInfo","setDebugInfo","fetchUserInfo","userRole","localStorage","getItem","storedUserName","token","console","log","tokenExists","intervalId","setInterval","clearInterval","handleUpdateSubjects","handleChooseSubjects","handleDownloadData","className","children","onClick","style","marginTop","border","padding"],"sources":["C:/Users/Francisco Chong/Desktop/Proyecto Final/frontengi/src/pages/menu.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Menu = () => {\r\n    const navigate = useNavigate();\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const [debugInfo, setDebugInfo] = useState({});\r\n\r\n    useEffect(() => {\r\n        const fetchUserInfo = () => {\r\n            const userRole = localStorage.getItem('userRole');\r\n            const storedUserName = localStorage.getItem('userName');\r\n            const token = localStorage.getItem('token');\r\n\r\n            console.log('Retrieved from localStorage:', { userRole, storedUserName, token });\r\n\r\n            setIsAdmin(userRole === 'admin');\r\n            setUserName(storedUserName || '');\r\n            setDebugInfo({ userRole, storedUserName, tokenExists: !!token });\r\n        };\r\n\r\n        fetchUserInfo();\r\n\r\n        // Configurar un intervalo para verificar periódicamente\r\n        const intervalId = setInterval(fetchUserInfo, 1000);\r\n\r\n        // Limpiar el intervalo cuando el componente se desmonte\r\n        return () => clearInterval(intervalId);\r\n    }, []);\r\n\r\n    const handleUpdateSubjects = () => {\r\n        navigate('/seleccion-materias');\r\n    };\r\n\r\n    const handleChooseSubjects = () => {\r\n        navigate('/SeleccionMateriashorarios');\r\n    };\r\n\r\n    const handleDownloadData = () => {\r\n        navigate('/Descarga');\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h1>Hola, {userName || 'Usuario'}!</h1>\r\n            <h2>Menú Principal</h2>\r\n            <div>\r\n                <button onClick={handleUpdateSubjects}>Generar Historial</button>\r\n            </div>\r\n            <div>\r\n                <button onClick={handleChooseSubjects}>Selección de Horarios</button>\r\n            </div>\r\n            {isAdmin && (\r\n                <div>\r\n                    <button onClick={handleDownloadData}>Descargar Información</button>\r\n                </div>\r\n            )}\r\n            <div style={{marginTop: '20px', border: '1px solid #ccc', padding: '10px'}}>\r\n                <p>Tipo de usuario: {debugInfo.userRole || 'Rol indefinido'}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Menu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}